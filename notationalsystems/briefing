Системы счисления
==================

В этой главе объясняются аспекты различных систем счисления чисел, используемых в среде разработки Microhard.

Двоичная запись:
----------------

Когда числа записываются в контексте аппаратных элементов (например, с сумматорами), то используется двоичная запись. Таким образом, каждая двоичная цифра соответствует pin. Обратите внимание, что когда мы пишем числа, мы всегда пишем самую младшую цифру справа, которая в шинах также будет выводом, индексированным как «1».


Преобразование числа из двоичного в десятичное:
-------------------------------------------

Чтобы преобразовать число из двоичного в десятичное представление, нам нужно определить значение для каждой цифры и сложить эти значения. Значение, которое мы назначаем каждой цифре:
x * 2^i
Где x - это значение (1 или 0), а i - это позиция (индексируется справа налево, начиная с нуля).

Например, двоичное число «1010» будет преобразовано следующим образом:

i: 3210
x: 1010

Результат: 0*2^0 + 1*2^1 + 0*2^2 + 1*2^3 = 10


Преобразование числа из десятичного в двоичное:
-------------------------------------------

При преобразовании из десятичной в двоичную запись нам нужно использовать обратный подход.

1.  Нам нужно найти наименьшее n, для которого 2^(n+1) больше десятичного числа x, которое мы хотим преобразовать.
2.  Теперь мы проверим, больше или равно ли наше число чем 2^n.
2a. Если это так, мы вычитаем 2^n из x и записываем двоичную цифру «1».
2b. В противном случае мы не меняем x и записываем двоичную цифру «0».
3.  Вычитаем 1 из n и, пока n >= 0, возвращаемся к шагу 2.

Для x=10 (десятичное):
1. n=3, так-как 2^3<10<2^4
2. 10 >= 2^3, поэтому наша первая цифра "1" и мы устанавливаем x = 10 - 2^3 = 2
3. 2 < 2^2, поэтому наша вторая цифра "0"
4. 2 >= 2^1, поэтому наша третья цифра "1" и мы устанавливаем x = 2-2 = 0
5. 0 < 2^0, поэтому наша последняя цифра "0"
6. Полученное двоичное число равно "1010"


Обозначение отрицательных двоичных чисел:
------------------------------------

Когда мы строим аппаратные элементы, которые работают с числами, они имеют фиксированную ширину шины. Таким образом, даже если число «1» может быть представлено в одном бите, у нас есть 3 запасных бита в 4-битном сумматоре (что дает точное значение «0001»).

Отрицательные числа можно представить, взяв самый левый бит и используя его в качестве индикатора, является ли число отрицательным. Однако лучший подход - использовать Дополнительный код. В этой форме число положительно или равно нулю, если самый левый бит равен «0», а число отрицательно, если самый левый бит равен «1». Чтобы сделать число отрицательным, мы принимаем его положительную форму, отменяем все биты и добавляем «1» к полученному числу. Это имеет главное преимущество: при суммировании чисел нам не нужно заботиться о том, являются ли они положительными или отрицательными. Дополнение, как описано в следующем разделе, всегда будет работать и давать правильный результат.

Добавление двоичных чисел:
----------------------
Добавление двоичных чисел так же просто, как добавление десятичных чисел. Вы можете написать два числа друг под другом и сложить их. Если результат > 1, вы должны использовать перенос (как в десятичной системе, если сложить два числа >= 10).

Например, двоичное число «1010» (десятичное значение 10) и двоичное число «11» (десятичное значение 3) можно добавить следующим образом:

  1010
+ 0011
======
  1101 (десятичное 13)
    x

Обратите внимание, что в столбце, помеченном "x" 1+1=0 + перенос(carry), который добавляется в следующий столбец. Это работает для положительных, отрицательных и смешанных операндов, когда используется дополнительный код для отрицательных чисел.


Шестнадцатеричная запись:
---------------------

Шестнадцатеричная запись используется там, где используются 16-битные шины. Преобразование из и в десятичную запись работает так же, как и в двоичной системе, но вместо «2^?» используйте «16^?». Также, поскольку шестнадцатеричная система представляет 16 значений в одной цифре, но у нас только 10 чисел (от 0 до 9), мы используем A,B,C,D,E,F для значений 10,11,12,13,14,15. Далее, когда мы пишем шестнадцатеричное число, мы всегда пишем перед ним 0x, поэтому мы не путаем его с десятичным числом. Другое преимущество шестнадцатеричной записи в том, что она хорошо разбивается на двоичную запись. 4 двоичные цифры могут быть точно выражены в 1 шестнадцатеричной цифре. Поэтому нет необходимости в сложном преобразовании, как в случае преобразований с десятичной системой. 